language: python
python:
- '2.7'
env:
  global:
  - DJANGO_SETTINGS_MODULE='djangobucketlist.settings.test'
install:
- pip install -r requirements.txt
- pip install coveralls
script:
- python manage.py collectstatic --noinput --settings=djangobucketlist.settings.test
- python manage.py makemigrations --settings=djangobucketlist.settings.test
- python manage.py migrate --settings=djangobucketlist.settings.test
- python manage.py test --noinput --settings=djangobucketlist.settings.test
after_success:
- coveralls
deploy:
  provider: heroku
  api_key:
    secure: RSiy8NZe4g10wDtFm23rKZ/MWWKMyRIPMfQSj7Vr0X48hrF87vbPudSkYSEf1ZmxWt7FaEvXecw4iiCqx7ECrC3QCldreRfSgHf1Gs7fgn+XlUwZ4hSpyFcmRAFonjAVjHwQjh0UdlZovAbRyz4z1WmFfW+RwxJ21ZoCx8SAClekH/Av4W0jy/zLnRf2GapIoz0VVZITtp4qexYsVcdr+WLVJaoYXiTR1rz0FpiNnCKUWBSweqntwonmEkvFzHGwJgjZApsbmtg8omTZeP7cUDw/6PwWcF/51nlO2qHk5Q/hZqrVjz8vUbKDrzUjPvhPuIFR0SOzZkWIX1jSJkt4YjNUL6puBLvIXJk1vtzbYwJLWvFxswWfr4FmYGcjd6Y0zDSGM0ke7PS/ndjI83A/IyL7kaSixCpHvHgIwsTZAMYyTagHzEUsOxGz1x8RfKP6bcqgHIgiYaWJIfKvGqBbOA8MstGUgfsK9MEvm1qVSvjm0XU3jPrY6qKNUNtm5YZKKiYvlRTE8QXceN6rO7yNuZUbbtgFp7tS/+a/S/ZV4lRt01vq5ety1RQP1Y1shAk5mHzxHd6yl7eLM6cpMyiKstMVPKacZgyO2OpOjhmzSB67HBW62tiH9xM3nz/EvQVgUCjbuFR70Smx+LJrgfCbNSFijkVvTdK4QTcrnYNmTzo=
  strategy: git
  app:
    develop: awesomebucket
  run:
  - export DJANGO_SETTINGS_MODULE=djangobucketlist.settings.production
  - python manage.py collectstatic --noinput
  - python manage.py makemigrations
  - python manage.py migrate auth
  - python manage.py migrate
  - python manage.py syncdb --noinput
after_deploy:
- heroku ps:scale web=1 --app awesomebucket
